<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="è€ç‹è¢å¹•éŒ„å½±å·¥å…· - å…å®‰è£ç¶²é ç‰ˆè¢å¹•éŒ„å½±å·¥å…·ï¼Œæ”¯æ´é ç´„éŒ„å½±ã€æ™‚é•·è¨­å®šã€æš«åœç¹¼çºŒç­‰åŠŸèƒ½">
    <title>è€ç‹è¢å¹•éŒ„å½±å·¥å…·</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
            font-family: 'Segoe UI', 'Microsoft JhengHei', sans-serif;
            color: #fff;
            padding: 20px;
            display: flex;
            gap: 24px;
            justify-content: center;
            align-items: flex-start;
            flex-wrap: wrap;
        }

        /* å‹•æ…‹èƒŒæ™¯ */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 80%, rgba(233, 69, 96, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(83, 52, 131, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(52, 152, 219, 0.05) 0%, transparent 40%);
            pointer-events: none;
            z-index: -1;
        }

        .main-panel {
            width: 480px;
            flex-shrink: 0;
            background: rgba(15, 52, 96, 0.4);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 32px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .help-panel {
            flex: 1;
            max-width: 600px;
            min-width: 360px;
            background: rgba(15, 52, 96, 0.3);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 20px;
            padding: 32px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .help-panel h2 {
            font-size: 24px;
            margin-bottom: 24px;
            color: #e94560;
            display: flex;
            align-items: center;
            gap: 12px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(233, 69, 96, 0.3);
        }

        .help-section {
            margin-bottom: 32px;
        }

        .help-section h3 {
            font-size: 18px;
            color: #3498db;
            margin-bottom: 16px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(52, 152, 219, 0.3);
        }

        .step-list {
            list-style: none;
            counter-reset: step;
        }

        .step-list li {
            counter-increment: step;
            padding: 12px 0 12px 42px;
            position: relative;
            font-size: 16px;
            line-height: 1.8;
            color: #ccc;
            border-left: 2px solid rgba(255, 255, 255, 0.1);
            margin-left: 16px;
            transition: all 0.3s ease;
        }

        .step-list li:hover {
            color: #fff;
            border-left-color: #e94560;
        }

        .step-list li:before {
            content: counter(step);
            position: absolute;
            left: -16px;
            top: 10px;
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #e94560, #533483);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            color: #fff;
            box-shadow: 0 2px 8px rgba(233, 69, 96, 0.4);
        }

        .step-list li:last-child {
            border-left-color: transparent;
        }

        .tip-box {
            background: rgba(0, 217, 165, 0.08);
            border: 1px solid rgba(0, 217, 165, 0.3);
            border-radius: 12px;
            padding: 20px;
            font-size: 15px;
            color: #00d9a5;
        }

        .tip-box strong {
            display: block;
            margin-bottom: 12px;
            font-size: 17px;
        }

        .tip-box ul {
            padding-left: 22px;
            margin: 0;
        }

        .tip-box li {
            margin-bottom: 8px;
        }

        .header {
            text-align: center;
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 30px;
            background: linear-gradient(90deg, #e94560, #ff6b8a, #533483);
            background-size: 200% auto;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-shift 3s ease infinite;
        }

        @keyframes gradient-shift {

            0%,
            100% {
                background-position: 0% center;
            }

            50% {
                background-position: 100% center;
            }
        }

        .header .version {
            font-size: 14px;
            color: #888;
            margin-top: 8px;
            letter-spacing: 1px;
        }

        .status-area {
            text-align: center;
            padding: 24px;
            background: linear-gradient(135deg, rgba(15, 52, 96, 0.8), rgba(10, 22, 40, 0.8));
            border-radius: 16px;
            margin-bottom: 24px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .status-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #00d9a5;
            animation: pulse 2s infinite;
            box-shadow: 0 0 10px rgba(0, 217, 165, 0.5);
        }

        .status-dot.recording {
            width: 16px;
            height: 16px;
            background: #ff4757;
            animation: pulse-rec 1s infinite;
            box-shadow: 0 0 15px rgba(255, 71, 87, 0.6);
        }

        .status-dot.paused {
            background: #ffc107;
            animation: none;
            box-shadow: 0 0 10px rgba(255, 193, 7, 0.5);
        }

        .status-dot.scheduled {
            background: #3498db;
            animation: pulse 1.5s infinite;
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.6;
                transform: scale(0.9);
            }
        }

        @keyframes pulse-rec {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
                box-shadow: 0 0 10px rgba(255, 71, 87, 0.6);
            }

            50% {
                opacity: 0.8;
                transform: scale(1.2);
                box-shadow: 0 0 25px rgba(255, 71, 87, 0.8);
            }
        }

        #statusText {
            font-size: 16px;
            font-weight: 500;
        }

        .timer {
            font-size: 52px;
            font-weight: bold;
            font-family: 'Consolas', 'Monaco', monospace;
            letter-spacing: 4px;
            background: linear-gradient(180deg, #fff 0%, #aaa 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .settings {
            margin-bottom: 24px;
        }

        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 16px;
        }

        .setting-row:last-child {
            border-bottom: none;
        }

        .setting-row select {
            background: rgba(22, 33, 62, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 15px;
            min-width: 180px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .setting-row select:hover {
            border-color: #e94560;
        }

        .setting-row select:focus {
            outline: none;
            border-color: #e94560;
            box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.2);
        }

        .datetime-picker {
            display: flex;
            gap: 10px;
            align-items: center;
            flex-wrap: wrap;
            justify-content: center;
        }

        .datetime-unit {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .datetime-unit label {
            font-size: 11px;
            color: #888;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .spinner-btn {
            background: rgba(15, 52, 96, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #e94560;
            width: 44px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .spinner-btn:hover {
            background: #e94560;
            color: #fff;
            transform: scale(1.05);
        }

        .spinner-btn.up {
            border-radius: 8px 8px 0 0;
        }

        .spinner-btn.down {
            border-radius: 0 0 8px 8px;
        }

        .spinner-value {
            background: rgba(22, 33, 62, 0.9);
            border-left: 1px solid rgba(255, 255, 255, 0.1);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            padding: 8px 12px;
            font-size: 20px;
            font-weight: bold;
            min-width: 44px;
            text-align: center;
            font-family: 'Consolas', monospace;
        }

        .datetime-separator {
            font-size: 20px;
            font-weight: bold;
            color: #666;
            margin: 0 6px;
            padding-top: 24px;
        }

        .schedule-section {
            background: rgba(10, 22, 40, 0.6);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .schedule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .schedule-header label {
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle {
            position: relative;
            width: 52px;
            height: 28px;
        }

        .toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(58, 58, 92, 0.8);
            border-radius: 28px;
            transition: 0.3s;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            border-radius: 50%;
            transition: 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .toggle input:checked+.toggle-slider {
            background: linear-gradient(135deg, #e94560, #533483);
        }

        .toggle input:checked+.toggle-slider:before {
            transform: translateX(24px);
        }

        .schedule-content {
            display: none;
            padding-top: 16px;
        }

        .schedule-content.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .schedule-info {
            background: rgba(52, 152, 219, 0.1);
            border: 1px solid rgba(52, 152, 219, 0.3);
            border-radius: 10px;
            padding: 16px;
            margin-top: 16px;
            font-size: 15px;
            text-align: center;
            display: none;
        }

        .schedule-info.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .schedule-info .time {
            font-weight: bold;
            color: #3498db;
            font-size: 18px;
            margin-top: 8px;
        }

        .btn-small {
            background: transparent;
            border: 1px solid #ff4757;
            color: #ff4757;
            padding: 8px 18px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            margin-top: 12px;
            transition: all 0.3s ease;
        }

        .btn-small:hover {
            background: rgba(255, 71, 87, 0.1);
            transform: scale(1.02);
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 18px;
            border: none;
            border-radius: 14px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, #e94560, #533483);
            color: #fff;
            box-shadow: 0 4px 15px rgba(233, 69, 96, 0.4);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(233, 69, 96, 0.5);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff4757, #c0392b);
            color: #fff;
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.5);
        }

        .btn-secondary {
            background: rgba(15, 52, 96, 0.8);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .btn-secondary:hover {
            background: rgba(25, 70, 120, 0.8);
            transform: translateY(-1px);
        }

        .btn-schedule {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: #fff;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-schedule:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.5);
        }

        .btn-group {
            display: flex;
            gap: 16px;
        }

        .btn-group .btn {
            flex: 1;
        }

        .message {
            margin-top: 18px;
            padding: 16px;
            border-radius: 12px;
            font-size: 15px;
            text-align: center;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .message.show {
            display: block;
        }

        .message.success {
            background: rgba(0, 217, 165, 0.1);
            border: 1px solid rgba(0, 217, 165, 0.3);
            color: #00d9a5;
        }

        .message.error {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            color: #ff4757;
        }

        .message.info {
            background: rgba(233, 69, 96, 0.1);
            border: 1px solid rgba(233, 69, 96, 0.3);
            color: #e94560;
        }

        .hidden {
            display: none !important;
        }

        .note {
            margin-top: 24px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            font-size: 13px;
            color: #888;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .custom-input {
            width: 90px;
            background: rgba(22, 33, 62, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            padding: 10px;
            border-radius: 8px;
            font-size: 16px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .custom-input:focus {
            outline: none;
            border-color: #e94560;
            box-shadow: 0 0 0 3px rgba(233, 69, 96, 0.2);
        }

        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 800px) {
            body {
                padding: 15px;
                gap: 16px;
            }

            .main-panel,
            .help-panel {
                width: 100%;
                max-width: 100%;
            }
        }

        /* ç€è¦½å™¨ä¸æ”¯æ´æç¤º */
        .browser-warning {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            padding: 20px;
        }

        .browser-warning.show {
            display: flex;
        }

        .browser-warning h2 {
            color: #e94560;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .browser-warning p {
            color: #ccc;
            font-size: 14px;
            max-width: 500px;
            line-height: 1.8;
        }
    </style>
</head>

<body>
    <!-- ç€è¦½å™¨ä¸æ”¯æ´è­¦å‘Š -->
    <div class="browser-warning" id="browserWarning">
        <h2>âš ï¸ ç€è¦½å™¨ä¸æ”¯æ´</h2>
        <p>æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´è¢å¹•éŒ„å½±åŠŸèƒ½ã€‚<br><br>
            è«‹ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ <strong>Chrome</strong>ã€<strong>Edge</strong>ã€<strong>Firefox</strong> æˆ– <strong>Safari</strong>
            ç€è¦½å™¨ï¼Œ
            ä¸¦ç¢ºä¿é€é <strong>HTTPS</strong> æˆ– <strong>localhost</strong> é–‹å•Ÿæ­¤é é¢ã€‚</p>
    </div>

    <div class="main-panel">
        <div class="header">
            <h1>ğŸ¬ è€ç‹è¢å¹•éŒ„å½±å·¥å…·</h1>
            <div class="version">v1.0.1 ç¶²é ç‰ˆ</div>
        </div>

        <div class="status-area">
            <div class="status-indicator">
                <span class="status-dot" id="statusDot"></span>
                <span id="statusText">æº–å‚™å°±ç·’</span>
            </div>
            <div class="timer" id="timer">00:00:00</div>
        </div>

        <div class="settings" id="settings">
            <div class="setting-row">
                <label>â±ï¸ éŒ„å½±æ™‚é•·</label>
                <select id="duration">
                    <option value="0" selected>ç„¡é™åˆ¶</option>
                    <option value="60">1 åˆ†é˜</option>
                    <option value="300">5 åˆ†é˜</option>
                    <option value="600">10 åˆ†é˜</option>
                    <option value="1800">30 åˆ†é˜</option>
                    <option value="3600">1 å°æ™‚</option>
                    <option value="custom">è‡ªè¨‚...</option>
                </select>
            </div>
            <div class="setting-row custom-duration" id="customDurationRow" style="display: none;">
                <label>è‡ªè¨‚æ™‚é•·</label>
                <div style="display: flex; align-items: center; gap: 8px;">
                    <input type="number" id="customMinutes" min="1" max="999" value="15" class="custom-input">
                    <span style="font-size: 12px;">åˆ†é˜</span>
                </div>
            </div>
        </div>

        <div class="schedule-section">
            <div class="schedule-header">
                <label>ğŸ“… é ç´„éŒ„å½±</label>
                <label class="toggle">
                    <input type="checkbox" id="scheduleToggle">
                    <span class="toggle-slider"></span>
                </label>
            </div>
            <div class="schedule-content" id="scheduleContent">
                <div class="datetime-picker">
                    <div class="datetime-unit">
                        <label>æœˆ</label>
                        <div class="spinner">
                            <button class="spinner-btn up" data-field="month" data-dir="1">â–²</button>
                            <div class="spinner-value" id="scheduleMonth">01</div>
                            <button class="spinner-btn down" data-field="month" data-dir="-1">â–¼</button>
                        </div>
                    </div>
                    <span class="datetime-separator">/</span>
                    <div class="datetime-unit">
                        <label>æ—¥</label>
                        <div class="spinner">
                            <button class="spinner-btn up" data-field="day" data-dir="1">â–²</button>
                            <div class="spinner-value" id="scheduleDay">01</div>
                            <button class="spinner-btn down" data-field="day" data-dir="-1">â–¼</button>
                        </div>
                    </div>
                    <span class="datetime-separator"> </span>
                    <div class="datetime-unit">
                        <label>æ™‚</label>
                        <div class="spinner">
                            <button class="spinner-btn up" data-field="hour" data-dir="1">â–²</button>
                            <div class="spinner-value" id="scheduleHour">12</div>
                            <button class="spinner-btn down" data-field="hour" data-dir="-1">â–¼</button>
                        </div>
                    </div>
                    <span class="datetime-separator">:</span>
                    <div class="datetime-unit">
                        <label>åˆ†</label>
                        <div class="spinner">
                            <button class="spinner-btn up" data-field="minute" data-dir="1">â–²</button>
                            <div class="spinner-value" id="scheduleMinute">00</div>
                            <button class="spinner-btn down" data-field="minute" data-dir="-1">â–¼</button>
                        </div>
                    </div>
                </div>
                <button class="btn btn-schedule" id="setScheduleBtn" style="margin-top: 14px;">è¨­å®šé ç´„</button>
            </div>
            <div class="schedule-info" id="scheduleInfo">
                <div>â° é ç´„æ™‚é–“</div>
                <div class="time" id="scheduledTime"></div>
                <button class="btn-small" id="cancelScheduleBtn">å–æ¶ˆé ç´„</button>
            </div>
        </div>

        <div class="controls">
            <button class="btn btn-primary" id="startBtn">â— é–‹å§‹éŒ„å½±</button>
            <button class="btn btn-danger hidden" id="stopBtn">â–  åœæ­¢éŒ„å½±</button>
            <div class="btn-group hidden" id="pauseGroup">
                <button class="btn btn-secondary" id="pauseBtn">â¸ æš«åœ</button>
                <button class="btn btn-secondary hidden" id="resumeBtn">â–¶ ç¹¼çºŒ</button>
            </div>
        </div>

        <div class="message" id="message"></div>

        <div class="note">
            ğŸ’¡ ä¿æŒæ­¤é é¢é–‹å•Ÿä»¥ç¶­æŒéŒ„å½±ï¼ˆå¯åˆ‡æ›åˆ°å…¶ä»–åˆ†é ï¼‰
        </div>
    </div>

    <div class="help-panel">
        <h2>ğŸ“– ä½¿ç”¨èªªæ˜</h2>

        <div class="help-section">
            <h3>ğŸ¬ éŒ„å½±æ­¥é©Ÿ</h3>
            <ol class="step-list">
                <li>é¸æ“‡éŒ„å½±æ™‚é•·ï¼ˆé è¨­ç‚ºç„¡é™åˆ¶ï¼Œå¯è‡ªè¨‚åˆ†é˜æ•¸ï¼‰</li>
                <li>é»æ“Š<strong>ã€Œâ— é–‹å§‹éŒ„å½±ã€</strong>æŒ‰éˆ•</li>
                <li>åœ¨å½ˆå‡ºçš„é¸æ“‡è¦–çª—ä¸­ï¼Œé¸æ“‡è¦éŒ„è£½çš„å…§å®¹ï¼š
                    <ul style="margin-top: 6px; padding-left: 16px; color: #888;">
                        <li>ã€Œåˆ†é ã€- éŒ„è£½å–®ä¸€ç€è¦½å™¨åˆ†é </li>
                        <li>ã€Œè¦–çª—ã€- éŒ„è£½æ•´å€‹æ‡‰ç”¨ç¨‹å¼è¦–çª—</li>
                        <li>ã€Œæ•´å€‹ç•«é¢ã€- éŒ„è£½å®Œæ•´è¢å¹•</li>
                    </ul>
                </li>
                <li>å‹¾é¸<strong>ã€Œåˆ†äº«ç³»çµ±éŸ³è¨Šã€</strong>ä»¥éŒ„è£½è²éŸ³</li>
                <li>é»æ“Š<strong>ã€Œåˆ†äº«ã€</strong>é–‹å§‹éŒ„å½±</li>
                <li>éŒ„å½±å®Œæˆå¾Œï¼Œé»æ“Š<strong>ã€Œâ–  åœæ­¢éŒ„å½±ã€</strong></li>
                <li>æª”æ¡ˆå°‡è‡ªå‹•ä¸‹è¼‰ç‚º WebM æ ¼å¼</li>
            </ol>
        </div>

        <div class="help-section">
            <h3>ğŸ“… é ç´„éŒ„å½±ï¼ˆé å‚™æ¨¡å¼ï¼‰</h3>
            <ol class="step-list">
                <li>é–‹å•Ÿã€Œé ç´„éŒ„å½±ã€é–‹é—œ</li>
                <li>ä½¿ç”¨ â–²â–¼ èª¿æ•´æœˆ/æ—¥/æ™‚/åˆ†</li>
                <li>é»æ“Šã€Œè¨­å®šé ç´„ã€</li>
                <li><strong>ç«‹å³é¸æ“‡</strong>è¦éŒ„è£½çš„å…§å®¹ä¸¦é»æ“Šã€Œåˆ†äº«ã€</li>
                <li>é€²å…¥ã€Œé å‚™ä¸­ã€ç‹€æ…‹ï¼Œç­‰å¾…é ç´„æ™‚é–“</li>
                <li>æ™‚é–“åˆ°æ™‚<strong>è‡ªå‹•é–‹å§‹éŒ„å½±</strong></li>
            </ol>
        </div>

        <div class="tip-box">
            <strong>ğŸ’¡ å°æç¤º</strong>
            <ul>
                <li>éŒ„å½±æœŸé–“è«‹ä¿æŒæ­¤é é¢é–‹å•Ÿï¼ˆå¯åˆ‡æ›åˆ†é ï¼‰</li>
                <li>è¦éŒ„è£½ç³»çµ±éŸ³è¨Šï¼Œè«‹è¨˜å¾—å‹¾é¸ã€Œåˆ†äº«ç³»çµ±éŸ³è¨Šã€</li>
                <li>éŒ„å½±æª”æ¡ˆå°‡å„²å­˜åœ¨ç€è¦½å™¨é è¨­ä¸‹è¼‰è³‡æ–™å¤¾</li>
                <li>å¯éš¨æ™‚æš«åœ/ç¹¼çºŒéŒ„å½±</li>
                <li>å»ºè­°ä½¿ç”¨ Chromeã€Edge æˆ– Firefox ç€è¦½å™¨</li>
            </ul>
        </div>
    </div>

    <script>
        /**
         * è€ç‹è¢å¹•éŒ„å½±å·¥å…· - ç¶²é ç‰ˆ v1.0.0
         * å…å®‰è£ï¼Œç›´æ¥åœ¨ç€è¦½å™¨é–‹å•Ÿå³å¯ä½¿ç”¨
         */

        // æª¢æŸ¥ç€è¦½å™¨æ”¯æ´
        (function checkBrowserSupport() {
            if (!navigator.mediaDevices || !navigator.mediaDevices.getDisplayMedia) {
                document.getElementById('browserWarning').classList.add('show');
            }
        })();

        // DOM å…ƒç´ 
        const elements = {
            statusDot: document.getElementById('statusDot'),
            statusText: document.getElementById('statusText'),
            timer: document.getElementById('timer'),
            settings: document.getElementById('settings'),
            duration: document.getElementById('duration'),
            scheduleToggle: document.getElementById('scheduleToggle'),
            scheduleContent: document.getElementById('scheduleContent'),
            setScheduleBtn: document.getElementById('setScheduleBtn'),
            scheduleInfo: document.getElementById('scheduleInfo'),
            scheduledTime: document.getElementById('scheduledTime'),
            cancelScheduleBtn: document.getElementById('cancelScheduleBtn'),
            startBtn: document.getElementById('startBtn'),
            stopBtn: document.getElementById('stopBtn'),
            pauseBtn: document.getElementById('pauseBtn'),
            resumeBtn: document.getElementById('resumeBtn'),
            pauseGroup: document.getElementById('pauseGroup'),
            message: document.getElementById('message'),
            scheduleMonth: document.getElementById('scheduleMonth'),
            scheduleDay: document.getElementById('scheduleDay'),
            scheduleHour: document.getElementById('scheduleHour'),
            scheduleMinute: document.getElementById('scheduleMinute'),
            customDurationRow: document.getElementById('customDurationRow'),
            customMinutes: document.getElementById('customMinutes')
        };

        // ç‹€æ…‹è®Šæ•¸
        let mediaRecorder = null;
        let recordedChunks = [];
        let recordingStream = null;
        let timerInterval = null;
        let elapsedSeconds = 0;
        let maxDuration = 0;
        let durationTimeout = null;
        let scheduleTimeout = null;
        let scheduledDateTime = null;
        let standbyStream = null;

        // é ç´„æ™‚é–“ç‹€æ…‹
        let scheduleDate = {
            month: new Date().getMonth() + 1,
            day: new Date().getDate(),
            hour: new Date().getHours(),
            minute: new Date().getMinutes() + 1
        };

        // è™•ç†åˆ†é˜æº¢å‡º
        if (scheduleDate.minute >= 60) {
            scheduleDate.minute = 0;
            scheduleDate.hour++;
            if (scheduleDate.hour >= 24) {
                scheduleDate.hour = 0;
                scheduleDate.day++;
            }
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            setupEventListeners();
            updateDateTimeDisplay();
        });

        function updateDateTimeDisplay() {
            elements.scheduleMonth.textContent = String(scheduleDate.month).padStart(2, '0');
            elements.scheduleDay.textContent = String(scheduleDate.day).padStart(2, '0');
            elements.scheduleHour.textContent = String(scheduleDate.hour).padStart(2, '0');
            elements.scheduleMinute.textContent = String(scheduleDate.minute).padStart(2, '0');
        }

        function adjustDateTime(field, direction) {
            const now = new Date();
            const currentYear = now.getFullYear();

            switch (field) {
                case 'month':
                    scheduleDate.month += direction;
                    if (scheduleDate.month > 12) scheduleDate.month = 1;
                    if (scheduleDate.month < 1) scheduleDate.month = 12;
                    break;
                case 'day':
                    const daysInMonth = new Date(currentYear, scheduleDate.month, 0).getDate();
                    scheduleDate.day += direction;
                    if (scheduleDate.day > daysInMonth) scheduleDate.day = 1;
                    if (scheduleDate.day < 1) scheduleDate.day = daysInMonth;
                    break;
                case 'hour':
                    scheduleDate.hour += direction;
                    if (scheduleDate.hour > 23) scheduleDate.hour = 0;
                    if (scheduleDate.hour < 0) scheduleDate.hour = 23;
                    break;
                case 'minute':
                    scheduleDate.minute += direction;
                    if (scheduleDate.minute >= 60) scheduleDate.minute = 0;
                    if (scheduleDate.minute < 0) scheduleDate.minute = 59;
                    break;
            }

            updateDateTimeDisplay();
        }

        function getScheduleDateTime() {
            const now = new Date();
            const year = now.getFullYear();
            return new Date(year, scheduleDate.month - 1, scheduleDate.day, scheduleDate.hour, scheduleDate.minute, 0);
        }

        function setupEventListeners() {
            elements.startBtn.addEventListener('click', startRecording);
            elements.stopBtn.addEventListener('click', stopRecording);
            elements.pauseBtn.addEventListener('click', pauseRecording);
            elements.resumeBtn.addEventListener('click', resumeRecording);

            elements.duration.addEventListener('change', () => {
                const isCustom = elements.duration.value === 'custom';
                elements.customDurationRow.style.display = isCustom ? 'flex' : 'none';
                saveSettings();
            });

            elements.customMinutes.addEventListener('change', saveSettings);

            elements.scheduleToggle.addEventListener('change', (e) => {
                elements.scheduleContent.classList.toggle('show', e.target.checked);
            });

            elements.setScheduleBtn.addEventListener('click', setSchedule);
            elements.cancelScheduleBtn.addEventListener('click', cancelSchedule);

            // æ—¥æœŸæ™‚é–“èª¿æ•´æŒ‰éˆ•
            document.querySelectorAll('.spinner-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const field = btn.dataset.field;
                    const dir = parseInt(btn.dataset.dir);
                    adjustDateTime(field, dir);
                });
            });
        }

        function loadSettings() {
            try {
                const savedDuration = localStorage.getItem('recorder_duration');
                const savedCustomMinutes = localStorage.getItem('recorder_customMinutes');

                if (savedDuration) {
                    elements.duration.value = savedDuration;
                    if (savedDuration === 'custom') {
                        elements.customDurationRow.style.display = 'flex';
                    }
                }
                if (savedCustomMinutes) {
                    elements.customMinutes.value = savedCustomMinutes;
                }
            } catch (e) {
                console.warn('ç„¡æ³•è¼‰å…¥è¨­å®š:', e);
            }
        }

        function saveSettings() {
            try {
                localStorage.setItem('recorder_duration', elements.duration.value);
                localStorage.setItem('recorder_customMinutes', elements.customMinutes.value);
            } catch (e) {
                console.warn('ç„¡æ³•å„²å­˜è¨­å®š:', e);
            }
        }

        function getDurationValue() {
            if (elements.duration.value === 'custom') {
                const mins = parseInt(elements.customMinutes.value) || 15;
                return mins * 60;
            }
            return parseInt(elements.duration.value) || 0;
        }

        async function setSchedule() {
            const scheduleDateTime = getScheduleDateTime();

            if (scheduleDateTime <= new Date()) {
                showMessage('æ™‚é–“å¿…é ˆæ˜¯æœªä¾†', 'error');
                return;
            }

            showMessage('è«‹é¸æ“‡è¦éŒ„è£½çš„å…§å®¹...', 'info');

            try {
                standbyStream = await navigator.mediaDevices.getDisplayMedia({
                    video: true,
                    audio: true
                });

                const videoTracks = standbyStream.getVideoTracks();
                if (videoTracks.length === 0) {
                    throw new Error('ç„¡æ³•å–å¾—è¦–è¨Šè»Œé“');
                }

                videoTracks[0].onended = () => {
                    if (standbyStream && !recordingStream) {
                        showMessage('é å‚™éŒ„å½±å·²å–æ¶ˆï¼ˆä½¿ç”¨è€…åœæ­¢åˆ†äº«ï¼‰', 'info');
                        cancelSchedule();
                    }
                };

            } catch (error) {
                console.error('ç„¡æ³•å–å¾—è¢å¹•ä¾†æº:', error);
                if (error.name === 'NotAllowedError') {
                    showMessage('å·²å–æ¶ˆé¸æ“‡', 'info');
                } else {
                    showMessage('éŒ¯èª¤: ' + (error.message || 'ç„¡æ³•å–å¾—è¢å¹•ä¾†æº'), 'error');
                }
                return;
            }

            scheduledDateTime = scheduleDateTime;
            const duration = getDurationValue();

            const delay = scheduleDateTime.getTime() - Date.now();
            if (scheduleTimeout) clearTimeout(scheduleTimeout);

            scheduleTimeout = setTimeout(() => {
                showMessage('é ç´„æ™‚é–“åˆ°ï¼é–‹å§‹éŒ„å½±...', 'info');
                maxDuration = duration;
                clearScheduleInfo();
                startRecordingFromStandby();
            }, delay);

            const audioTracks = standbyStream.getAudioTracks();
            showScheduleInfo(scheduleDateTime);
            elements.scheduleToggle.checked = false;
            elements.scheduleContent.classList.remove('show');
            setStatus('é å‚™ä¸­', 'scheduled');
            showMessage(`é ç´„å·²è¨­å®šï¼${audioTracks.length > 0 ? '(å«éŸ³è¨Š)' : '(ç„¡éŸ³è¨Š)'} è«‹ä¿æŒæ­¤é é¢é–‹å•Ÿ`, 'success');
        }

        function showScheduleInfo(date) {
            elements.scheduledTime.textContent = date.toLocaleString('zh-TW');
            elements.scheduleInfo.classList.add('show');
            setStatus('å·²æ’ç¨‹', 'scheduled');
        }

        function cancelSchedule() {
            if (scheduleTimeout) {
                clearTimeout(scheduleTimeout);
                scheduleTimeout = null;
            }

            if (standbyStream) {
                standbyStream.getTracks().forEach(t => t.stop());
                standbyStream = null;
            }

            elements.scheduleInfo.classList.remove('show');
            scheduledDateTime = null;
            setStatus('æº–å‚™å°±ç·’', '');
            showMessage('å·²å–æ¶ˆé ç´„', 'info');
        }

        function clearScheduleInfo() {
            elements.scheduleInfo.classList.remove('show');
            scheduledDateTime = null;
        }

        function startRecordingFromStandby() {
            if (!standbyStream) {
                showMessage('é å‚™ä¸²æµå·²å¤±æ•ˆï¼Œè«‹é‡æ–°è¨­å®š', 'error');
                setStatus('æº–å‚™å°±ç·’', '');
                return;
            }

            try {
                recordingStream = standbyStream;
                standbyStream = null;

                const audioTracks = recordingStream.getAudioTracks();
                console.log(`å¾é å‚™æ¨¡å¼é–‹å§‹éŒ„å½±ï¼Œ${audioTracks.length} å€‹éŸ³è»Œ`);

                recordedChunks = [];
                const mimeType = getSupportedMimeType();

                try {
                    mediaRecorder = new MediaRecorder(recordingStream, {
                        mimeType: mimeType,
                        videoBitsPerSecond: 2500000
                    });
                } catch (e) {
                    console.warn('MediaRecorder é…ç½®å¤±æ•—ï¼Œä½¿ç”¨é è¨­å€¼:', e);
                    mediaRecorder = new MediaRecorder(recordingStream);
                }

                mediaRecorder.ondataavailable = (e) => {
                    if (e.data && e.data.size > 0) {
                        recordedChunks.push(e.data);
                    }
                };

                mediaRecorder.onstop = () => {
                    saveRecording();
                    cleanupRecording();
                };

                mediaRecorder.onerror = (e) => {
                    console.error('MediaRecorder éŒ¯èª¤:', e);
                    showMessage('éŒ„å½±ç™¼ç”ŸéŒ¯èª¤', 'error');
                    stopRecording();
                };

                recordingStream.getVideoTracks()[0].onended = () => {
                    stopRecording();
                };

                mediaRecorder.start(1000);

                updateUI(true);
                startTimer();
                showMessage(audioTracks.length > 0 ? 'éŒ„å½±ä¸­ (å«éŸ³è¨Š)' : 'éŒ„å½±ä¸­', 'success');

                if (maxDuration > 0) {
                    durationTimeout = setTimeout(() => {
                        showMessage('æ™‚é–“åˆ°ï¼Œè‡ªå‹•åœæ­¢', 'info');
                        stopRecording();
                    }, maxDuration * 1000);
                }

            } catch (error) {
                console.error('å¾é å‚™æ¨¡å¼éŒ„å½±éŒ¯èª¤:', error);
                maxDuration = 0;

                if (recordingStream) {
                    recordingStream.getTracks().forEach(t => t.stop());
                    recordingStream = null;
                }

                showMessage('éŒ¯èª¤: ' + (error.message || 'æœªçŸ¥éŒ¯èª¤'), 'error');
                setStatus('æº–å‚™å°±ç·’', '');
            }
        }

        async function startRecording() {
            try {
                if (maxDuration === 0) {
                    maxDuration = getDurationValue();
                }

                showMessage('æ­£åœ¨å•Ÿå‹•...', 'info');

                recordingStream = await navigator.mediaDevices.getDisplayMedia({
                    video: true,
                    audio: true
                });

                const videoTracks = recordingStream.getVideoTracks();
                if (videoTracks.length === 0) {
                    throw new Error('ç„¡æ³•å–å¾—è¦–è¨Šè»Œé“');
                }

                const audioTracks = recordingStream.getAudioTracks();
                console.log(`å–å¾— ${audioTracks.length} å€‹éŸ³è»Œ`);

                recordedChunks = [];
                const mimeType = getSupportedMimeType();

                try {
                    mediaRecorder = new MediaRecorder(recordingStream, {
                        mimeType: mimeType,
                        videoBitsPerSecond: 2500000
                    });
                } catch (e) {
                    console.warn('MediaRecorder é…ç½®å¤±æ•—ï¼Œä½¿ç”¨é è¨­å€¼:', e);
                    mediaRecorder = new MediaRecorder(recordingStream);
                }

                mediaRecorder.ondataavailable = (e) => {
                    if (e.data && e.data.size > 0) {
                        recordedChunks.push(e.data);
                    }
                };

                mediaRecorder.onstop = () => {
                    saveRecording();
                    cleanupRecording();
                };

                mediaRecorder.onerror = (e) => {
                    console.error('MediaRecorder éŒ¯èª¤:', e);
                    showMessage('éŒ„å½±ç™¼ç”ŸéŒ¯èª¤', 'error');
                    stopRecording();
                };

                videoTracks[0].onended = () => {
                    stopRecording();
                };

                await new Promise(r => setTimeout(r, 100));
                mediaRecorder.start(1000);

                updateUI(true);
                startTimer();
                showMessage(audioTracks.length > 0 ? 'éŒ„å½±ä¸­ (å«éŸ³è¨Š)' : 'éŒ„å½±ä¸­', 'success');

                if (maxDuration > 0) {
                    durationTimeout = setTimeout(() => {
                        showMessage('æ™‚é–“åˆ°ï¼Œè‡ªå‹•åœæ­¢', 'info');
                        stopRecording();
                    }, maxDuration * 1000);
                }

            } catch (error) {
                console.error('éŒ„å½±éŒ¯èª¤:', error);
                maxDuration = 0;

                if (recordingStream) {
                    recordingStream.getTracks().forEach(t => t.stop());
                    recordingStream = null;
                }

                if (error.name === 'NotAllowedError') {
                    showMessage('å·²å–æ¶ˆé¸æ“‡', 'info');
                } else if (error.name === 'NotFoundError') {
                    showMessage('æ‰¾ä¸åˆ°å¯ç”¨çš„è¢å¹•ä¾†æº', 'error');
                } else if (error.name === 'NotReadableError') {
                    showMessage('ç„¡æ³•å­˜å–è¢å¹•ï¼Œè«‹ç¢ºèªæ¬Šé™è¨­å®š', 'error');
                } else if (error.name === 'AbortError') {
                    showMessage('éŒ„å½±è¢«ä¸­æ–·', 'info');
                } else {
                    showMessage('éŒ¯èª¤: ' + (error.message || 'æœªçŸ¥éŒ¯èª¤'), 'error');
                }
            }
        }

        function stopRecording() {
            if (mediaRecorder && mediaRecorder.state !== 'inactive') {
                mediaRecorder.stop();
            }
            if (durationTimeout) {
                clearTimeout(durationTimeout);
                durationTimeout = null;
            }
            maxDuration = 0;
            updateUI(false);
            stopTimer();
        }

        function pauseRecording() {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.pause();
                elements.pauseBtn.classList.add('hidden');
                elements.resumeBtn.classList.remove('hidden');
                setStatus('å·²æš«åœ', 'paused');
                stopTimer();
                showMessage('éŒ„å½±å·²æš«åœ', 'info');
            }
        }

        function resumeRecording() {
            if (mediaRecorder && mediaRecorder.state === 'paused') {
                mediaRecorder.resume();
                elements.resumeBtn.classList.add('hidden');
                elements.pauseBtn.classList.remove('hidden');
                setStatus('éŒ„å½±ä¸­', 'recording');
                startTimer(elapsedSeconds);
                showMessage('éŒ„å½±å·²ç¹¼çºŒ', 'success');
            }
        }

        function saveRecording() {
            if (recordedChunks.length === 0) {
                showMessage('æ²’æœ‰éŒ„å½±è³‡æ–™', 'error');
                return;
            }

            const mimeType = getSupportedMimeType();
            const blob = new Blob(recordedChunks, { type: mimeType });
            const now = new Date();
            const filename = `è¢å¹•éŒ„å½±_${now.toISOString().slice(0, 10)}_${now.toTimeString().slice(0, 8).replace(/:/g, '-')}.webm`;

            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);

            showMessage('å·²å„²å­˜: ' + filename, 'success');
        }

        function cleanupRecording() {
            if (recordingStream) {
                recordingStream.getTracks().forEach(t => t.stop());
                recordingStream = null;
            }
            mediaRecorder = null;
            recordedChunks = [];
            elapsedSeconds = 0;
        }

        function getSupportedMimeType() {
            const types = [
                'video/webm;codecs=vp9,opus',
                'video/webm;codecs=vp8,opus',
                'video/webm'
            ];
            for (const t of types) {
                if (MediaRecorder.isTypeSupported(t)) return t;
            }
            return 'video/webm';
        }

        function updateUI(isRecording) {
            elements.startBtn.classList.toggle('hidden', isRecording);
            elements.stopBtn.classList.toggle('hidden', !isRecording);
            elements.pauseGroup.classList.toggle('hidden', !isRecording);
            elements.pauseBtn.classList.remove('hidden');
            elements.resumeBtn.classList.add('hidden');
            elements.settings.style.opacity = isRecording ? '0.5' : '1';
            elements.settings.style.pointerEvents = isRecording ? 'none' : 'auto';

            if (isRecording) {
                setStatus('éŒ„å½±ä¸­', 'recording');
            } else if (scheduledDateTime) {
                setStatus('å·²æ’ç¨‹', 'scheduled');
            } else {
                setStatus('æº–å‚™å°±ç·’', '');
            }

            if (!isRecording) {
                elements.timer.textContent = '00:00:00';
            }
        }

        function setStatus(text, state) {
            elements.statusText.textContent = text;
            elements.statusDot.className = 'status-dot ' + state;
        }

        function startTimer(initial = 0) {
            elapsedSeconds = initial;
            updateTimerDisplay();
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                elapsedSeconds++;
                updateTimerDisplay();
            }, 1000);
        }

        function stopTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function updateTimerDisplay() {
            const h = Math.floor(elapsedSeconds / 3600);
            const m = Math.floor((elapsedSeconds % 3600) / 60);
            const s = elapsedSeconds % 60;
            elements.timer.textContent = `${String(h).padStart(2, '0')}:${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
        }

        function showMessage(text, type) {
            elements.message.textContent = text;
            elements.message.className = 'message show ' + type;
            setTimeout(() => elements.message.classList.remove('show'), 4000);
        }

        // ç›£è½é é¢é—œé–‰
        window.addEventListener('beforeunload', (e) => {
            if (mediaRecorder && mediaRecorder.state !== 'inactive') {
                e.preventDefault();
                e.returnValue = 'éŒ„å½±ä¸­ï¼Œç¢ºå®šè¦é—œé–‰å—ï¼Ÿ';
            }
        });
    </script>
</body>

</html>